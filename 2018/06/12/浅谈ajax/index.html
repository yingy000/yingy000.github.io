<!DOCTYPE HTML>
<html lang="Chinese">
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="天使在人间の博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->





<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>浅谈ajax | 天使在人间の博客</title>


    <link rel="alternate" href="/atom.xml" title="天使在人间の博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>


<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Yang Ying'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">天使在人间の博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>Home</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/前端/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/Camera/"><i class="fa "></i>Camera</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/工具/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/资源/"><i class="fa "></i>资源</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/生活/"><i class="fa "></i>生活</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="浅谈ajax">
            
	            浅谈ajax
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/博客列表">
            博客列表
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <a href="/tags/AJAX" title='AJAX'>
                        AJAX
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/06/12</span>
        </span>
        
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <blockquote>
<p>AJAX 即 Asynchronous Javascript And XML，不是一门的新的语言，而是对现有持术的综合利用。其本质是在HTTP协议的基础上以异步的方式与服务器进行通信。</p>
</blockquote>
<h2 id="1-XMLHttpRequest"><a href="#1-XMLHttpRequest" class="headerlink" title="1.XMLHttpRequest"></a>1.XMLHttpRequest</h2><p>浏览器内建对象，用于在后台与服务器通信(交换数据) ，由此我们便可实现对网页的部分更新，而不是刷新整个页面。(局部更新)</p>
<p>内建对象：浏览器已经封装好了该方法，用的时候只需要new一下就可以拿来使用了。</p>
<p>举例：我们先写请求行和请求主体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;&lt;/title&gt;</span><br><span class="line">		&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">			//new一下，实例化</span><br><span class="line">			var xhr=new XMLHttpRequest;</span><br><span class="line">			//请求</span><br><span class="line">			//请求行</span><br><span class="line">			xhr.open(&apos;get&apos;,&apos;01.txt&apos;);</span><br><span class="line">			//以get的方式请求，请求主体为空。</span><br><span class="line">			//请求主体</span><br><span class="line">			xhr.send(null);</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>我们可以再浏览器看一下结果：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_1.png" alt=" "></p>
<p>可以明显的看到请求的地址和请求的方法。</p>
<p>注意：请求主体即使是空的，也要写着，这个是不能忽略的。</p>
<p>现在可以来写请求头了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求头</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html'</span>);</span><br></pre></td></tr></table></figure>
<p>再来刷一刷浏览器的结果：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_2.png" alt=" "></p>
<p>请求发送完了，这下我们该接收响应了。这下客户端的请求发送过来了，等到服务器空闲就去处理，本来说是客户端得一直等着服务器端的处理，其实客户端不用一直等着去干别的事情，可以设置一个监听事件<code>onreadystatechange</code>监听服务器端什么时候处理完这个请求，等服务器处理完之后客户端在接收，这样客户端就不用一直等着，这也就是异步请求的原理。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收响应</span></span><br><span class="line">		xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(xhr.readyState);</span><br><span class="line">			<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">				<span class="keyword">var</span> result=xhr.responseText;</span><br><span class="line">				<span class="built_in">console</span>.log(result);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<p><code>onreadystatechang</code>属性一直监听着服务器端的变化，我们可以检测一下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line">		&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">			<span class="comment">//new一下，实例化</span></span><br><span class="line">			<span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">			<span class="built_in">console</span>.log(xhr.readyState);</span><br><span class="line">			<span class="comment">//请求</span></span><br><span class="line">			<span class="comment">//请求行</span></span><br><span class="line">			xhr.open(<span class="string">'get'</span>,<span class="string">'01.txt'</span>);</span><br><span class="line">			<span class="built_in">console</span>.log(xhr.readyState);</span><br><span class="line">			<span class="comment">//请求头</span></span><br><span class="line">			xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html'</span>);</span><br><span class="line">			<span class="built_in">console</span>.log(xhr.readyState);</span><br><span class="line">			<span class="comment">//以get的方式请求，请求主体为空。</span></span><br><span class="line">			<span class="comment">//请求主体</span></span><br><span class="line">			xhr.send(<span class="literal">null</span>);</span><br><span class="line">			<span class="comment">//接收响应</span></span><br><span class="line">			xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(xhr.readyState);</span><br><span class="line">				<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">					<span class="keyword">var</span> result=xhr.responseText;</span><br><span class="line">					<span class="built_in">console</span>.log(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;p id=<span class="string">"result"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">	&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<p>在浏览器控制台查看结果：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_3.png" alt=" "></p>
<p>readyState属性的所有取值以及它所使用的范围：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_4.png" alt=" "></p>
<h2 id="2-同步"><a href="#2-同步" class="headerlink" title="2.同步"></a>2.同步</h2><p>ajax请求的方式是一个典型的异步请求的方式。我们现在可以看一下同步请求</p>
<p><code>open()</code>方法中的第三个参数为true时，表示异步，为false时表示同步，默认为true。</p>
<p>举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			<span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">			xhr.open(<span class="string">"get"</span>,<span class="string">"02.php"</span>,<span class="literal">false</span>);</span><br><span class="line">			xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'text/html'</span>);</span><br><span class="line">			xhr.send(<span class="literal">null</span>);</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"我是同步消息"</span>);	</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>02.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'我是同步方式的'</span>;</span><br><span class="line">sleep(<span class="number">10</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>大家可以在控制台看一下，等到10秒之后才会在控制台输出“我是同步消息”这句话，也就是说以同步的方式发送消息，客户端会一直在等待服务器做出响应，这样的效率会很低。</p>
<p>注意：有关于php的代码只有在php中运行才会有效，在测试前应该配置好基本的环境。</p>
<h2 id="3-XMLHttpRequest传递数据"><a href="#3-XMLHttpRequest传递数据" class="headerlink" title="3.XMLHttpRequest传递数据"></a>3.XMLHttpRequest传递数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			<span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">			xhr.open(<span class="string">"get"</span>,<span class="string">"03.php?name=yang"</span>)</span><br><span class="line">			xhr.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"text/html"</span>);</span><br><span class="line">			xhr.send(<span class="literal">null</span>);</span><br><span class="line">			xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp; xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">					<span class="keyword">var</span> result=xhr.responseText;</span><br><span class="line">                     <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML=result;</span><br><span class="line">					<span class="built_in">console</span>.log(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;p id=<span class="string">"result"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">	&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>03.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> $_GET[<span class="string">'name'</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果：很明显在客户端已经获取到了这样的结果</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_6.png" alt=" "></p>
<p>大家是不是很好奇为什么传递数据为什么要是这样的形式？把要传递的参数写在请求资源的后面。</p>
<p><code>xhr.open(&quot;get&quot;,&quot;03.php?name=yang&quot;)</code></p>
<p>原因：因为在get的请求方式中，浏览器在默认情况下就是把参数放在URL后面的,我们要遵从浏览器的默认行为。</p>
<p>那如果以post的方式该怎么传递数据呢？肯定是和get的方式有些区别的。</p>
<p>以post的形式的话，传递的数据是放在<code>send()</code>方法中的。</p>
<p>注意：当以post形式提交表单的时候，请求头里会设置<code>Content-Type:application/x-www-form-urlencoded</code>，以get形式时不需要请求主体。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			<span class="keyword">var</span> xhr=<span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">			xhr.open(<span class="string">"post"</span>,<span class="string">"04.php"</span>)</span><br><span class="line">			xhr.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">			xhr.send(<span class="string">"name=yang&amp;age=18"</span>);</span><br><span class="line">			xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp; xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line">					<span class="keyword">var</span> result=xhr.responseText;</span><br><span class="line">                     <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML=result;</span><br><span class="line">					<span class="built_in">console</span>.log(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;p id=<span class="string">"result"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">	&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>04.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> $_POST[<span class="string">'name'</span>].$_POST[<span class="string">'age'</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果：<img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_7.png" alt=" "></p>
<h2 id="4-XMLHttpRequest实现局部更新功能-表单事件提交"><a href="#4-XMLHttpRequest实现局部更新功能-表单事件提交" class="headerlink" title="4.XMLHttpRequest实现局部更新功能(表单事件提交)"></a>4.XMLHttpRequest实现局部更新功能(表单事件提交)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">	&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">	&lt;body&gt;</span></span><br><span class="line"><span class="regexp">		&lt;input type="text" id="text" /</span>&gt;</span><br><span class="line">		&lt;input type=<span class="string">"submit"</span> value=<span class="string">"发送"</span> id=<span class="string">"sub"</span> /&gt;</span><br><span class="line">		&lt;p id=<span class="string">"result"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			<span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"sub"</span>);</span><br><span class="line">			<span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>);</span><br><span class="line">			btn.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">				<span class="comment">//点击的时候才去实例化XMLHttpRequest，而不是加载的时候实例化XMLHttpRequest</span></span><br><span class="line">				<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">				xhr.open(<span class="string">"post"</span>, <span class="string">"05.php"</span>);</span><br><span class="line">				<span class="comment">//因为是post请求的方式，所以一定要设置Content-Type</span></span><br><span class="line">				xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">				xhr.send(<span class="string">'text='</span> + test.value);</span><br><span class="line">				xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">					<span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">						<span class="keyword">var</span> result = xhr.responseText;</span><br><span class="line">						<span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML = result;</span><br><span class="line">						<span class="built_in">console</span>.log(result);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>05.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;strong&gt;'</span>.$_POST[<span class="string">'text'</span>].<span class="string">'&lt;/strong&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>运行结果</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_8.png" alt=" "></p>
<p>那我们来看一个小案例吧。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">	&lt;title&gt;Ajax&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">	&lt;style&gt;</span></span><br><span class="line"><span class="regexp">		body &#123;</span></span><br><span class="line"><span class="regexp">			margin: 0;</span></span><br><span class="line"><span class="regexp">			padding: 0;</span></span><br><span class="line"><span class="regexp">			background-color: #F7F7F7;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.chatbox &#123;</span></span><br><span class="line"><span class="regexp">			width: 500px;</span></span><br><span class="line"><span class="regexp">			height: 500px;</span></span><br><span class="line"><span class="regexp">			margin: 0 auto;</span></span><br><span class="line"><span class="regexp">			border: 1px solid #CCC;</span></span><br><span class="line"><span class="regexp">			background-color: #FFF;</span></span><br><span class="line"><span class="regexp">			border-radius: 5px;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.messages &#123;</span></span><br><span class="line"><span class="regexp">			height: 350px;</span></span><br><span class="line"><span class="regexp">			padding: 20px 40px;</span></span><br><span class="line"><span class="regexp">			box-sizing: border-box;</span></span><br><span class="line"><span class="regexp">			border-bottom: 1px solid #CCC;</span></span><br><span class="line"><span class="regexp">			overflow: scroll;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.messages h5 &#123;</span></span><br><span class="line"><span class="regexp">			font-size: 20px;</span></span><br><span class="line"><span class="regexp">			margin: 10px 0;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.messages p &#123;</span></span><br><span class="line"><span class="regexp">			font-size: 18px;</span></span><br><span class="line"><span class="regexp">			margin: 0;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.self &#123;</span></span><br><span class="line"><span class="regexp">			text-align: left;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.other &#123;</span></span><br><span class="line"><span class="regexp">			text-align: right;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.form &#123;</span></span><br><span class="line"><span class="regexp">			height: 150px;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.form .input &#123;</span></span><br><span class="line"><span class="regexp">			height: 110px;</span></span><br><span class="line"><span class="regexp">			padding: 10px;</span></span><br><span class="line"><span class="regexp">			box-sizing: border-box;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.form .btn &#123;</span></span><br><span class="line"><span class="regexp">			height: 40px;</span></span><br><span class="line"><span class="regexp">			box-sizing: border-box;</span></span><br><span class="line"><span class="regexp">			border-top: 1px solid #CCC;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.form textarea &#123;</span></span><br><span class="line"><span class="regexp">			display: block;</span></span><br><span class="line"><span class="regexp">			width: 100%;</span></span><br><span class="line"><span class="regexp">			height: 100%;</span></span><br><span class="line"><span class="regexp">			box-sizing: border-box;</span></span><br><span class="line"><span class="regexp">			border: none;</span></span><br><span class="line"><span class="regexp">			resize: none;</span></span><br><span class="line"><span class="regexp">			outline: none;</span></span><br><span class="line"><span class="regexp">			font-size: 20px;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">		.form input &#123;</span></span><br><span class="line"><span class="regexp">			display: block;</span></span><br><span class="line"><span class="regexp">			width: 100px;</span></span><br><span class="line"><span class="regexp">			height: 30px;</span></span><br><span class="line"><span class="regexp">			margin-top: 5px;</span></span><br><span class="line"><span class="regexp">			margin-right: 20px;</span></span><br><span class="line"><span class="regexp">			float: right;</span></span><br><span class="line"><span class="regexp">		&#125;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>style&gt;</span><br><span class="line">&lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">&lt;body&gt;</span></span><br><span class="line"><span class="regexp">	&lt;div class="chatbox"&gt;</span></span><br><span class="line"><span class="regexp">		&lt;div class="messages"&gt;	</span></span><br><span class="line"><span class="regexp">		&lt;/</span>div&gt;</span><br><span class="line">		&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form"</span>&gt;</span><br><span class="line">			&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"input"</span>&gt;</span><br><span class="line">				&lt;textarea&gt;<span class="xml"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line">			&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">			&lt;div class="btn"&gt;</span></span><br><span class="line"><span class="regexp">				&lt;input type="button" value="发送"&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>div&gt;</span><br><span class="line">		&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	&lt;/</span>div&gt;</span><br><span class="line">	&lt;!--<span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line">		&lt;div class="item self"&gt;</span><br><span class="line">			&lt;h5&gt;我说&lt;/h5&gt;</span><br><span class="line">			&lt;p&gt;你好&lt;/p&gt;</span><br><span class="line"><span class="xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		&lt;div class="item other"&gt;</span><br><span class="line">			&lt;h5&gt;对方说&lt;/h5&gt;</span><br><span class="line">			&lt;p&gt;你好&lt;/p&gt;</span><br><span class="line"><span class="xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>--&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		<span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">'.btn'</span>);</span><br><span class="line">		<span class="keyword">var</span> message = <span class="built_in">document</span>.querySelector(<span class="string">'.messages'</span>);</span><br><span class="line">		btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">			<span class="comment">// 获取表单的DOM节点</span></span><br><span class="line">			<span class="keyword">var</span> input = <span class="built_in">document</span>.querySelector(<span class="string">'textarea'</span>);</span><br><span class="line">			<span class="comment">// 获取文本内容</span></span><br><span class="line">			<span class="keyword">var</span> val = input.value;</span><br><span class="line">			<span class="comment">// 通过一函数创建并接凑DOM节点</span></span><br><span class="line">			<span class="keyword">var</span> item = createMessage(<span class="string">'self'</span>, val);</span><br><span class="line">			<span class="comment">// 将创建完成的DOM节点追加到消息盒子里</span></span><br><span class="line">			message.appendChild(item);</span><br><span class="line">			<span class="comment">// 置空表单</span></span><br><span class="line">			input.value = <span class="string">''</span>;</span><br><span class="line">			]</span><br><span class="line">			<span class="comment">/******************以下是Ajax*******************/</span></span><br><span class="line">			<span class="comment">// 发起请求</span></span><br><span class="line">			xhr.open(<span class="string">'post'</span>, <span class="string">'chat.php'</span>);</span><br><span class="line">			<span class="comment">// 设置请求头</span></span><br><span class="line">			xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">			<span class="comment">// 发送到服务器</span></span><br><span class="line">			xhr.send(<span class="string">'message='</span> + val);</span><br><span class="line">			<span class="comment">// 监听并处理响应</span></span><br><span class="line">			xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">					<span class="comment">// 接收返回的消息</span></span><br><span class="line">					<span class="keyword">var</span> result = xhr.responseText;</span><br><span class="line">					<span class="comment">// 通过一函数创建并接凑DOM节点</span></span><br><span class="line">					<span class="keyword">var</span> item = createMessage(<span class="string">'other'</span>, result);</span><br><span class="line">					<span class="comment">// 将接凑好的DOM节点追加到消息盒子里</span></span><br><span class="line">					message.appendChild(item);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 动态创建DOM</span></span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">createMessage</span>(<span class="params">flag, text</span>) </span>&#123;</span><br><span class="line">			<span class="comment">// 创建结点</span></span><br><span class="line">			<span class="keyword">var</span> item = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>),</span><br><span class="line">				h5 = <span class="built_in">document</span>.createElement(<span class="string">'h5'</span>),</span><br><span class="line">				p = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span><br><span class="line">			<span class="comment">// 添加类</span></span><br><span class="line">			item.classList.add(<span class="string">'item'</span>);</span><br><span class="line">			item.classList.add(flag);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 判断主体</span></span><br><span class="line">			<span class="keyword">switch</span>(flag) &#123;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'self'</span>:</span><br><span class="line">					h5.innerText = <span class="string">'我说'</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'other'</span>:</span><br><span class="line">					h5.innerText = <span class="string">'对方说'</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 插入文本</span></span><br><span class="line">			p.innerText = text;</span><br><span class="line">			<span class="comment">// 追加节点</span></span><br><span class="line">			item.appendChild(h5);</span><br><span class="line">			item.appendChild(p);</span><br><span class="line">			<span class="keyword">return</span> item;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>chat.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	$messages = <span class="keyword">array</span>(</span><br><span class="line">		<span class="string">'你说啥？'</span>,</span><br><span class="line">		<span class="string">'你也好'</span>,</span><br><span class="line">		<span class="string">'你找我有啥事？'</span>,</span><br><span class="line">		<span class="string">'我在吃饭！'</span></span><br><span class="line">	);</span><br><span class="line">	<span class="comment">// 通过array_rand()随机获取数组下标</span></span><br><span class="line">	<span class="comment">// var_dump(array_rand($messages));</span></span><br><span class="line">	<span class="keyword">echo</span> $messages[array_rand($messages)];</span><br><span class="line">	sleep(<span class="number">1</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_9.png" alt=" "></p>
<h2 id="5-简单的总结"><a href="#5-简单的总结" class="headerlink" title="5.简单的总结"></a>5.简单的总结</h2><p><code>XMLHttpRequest</code>：浏览器内建对象，用于在后台与服务器通信(交换数据) ，由此我们便可实现对网页的部分更新，而不是刷新整个页面。</p>
<p>下面是一个简单的例子：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_10.png" alt=" "></p>
<p>由于XMLHttpRequest本质基于HTTP协议实现通信，所以结合HTTP协议和上面的例子我们分析得出如下结果：</p>
<h3 id="5-1-请求"><a href="#5-1-请求" class="headerlink" title="5.1.请求"></a>5.1.请求</h3><p>HTTP请求3个组成部分与XMLHttpRequest方法的对应关系</p>
<ul>
<li>请求行</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_11.png" alt=" "></p>
<ul>
<li>请求头</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_12.png" alt=" "></p>
<p>get请求可以不设置</p>
<ul>
<li>请求主体</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_13.png" alt=" "></p>
<p>注意书写顺序</p>
<h3 id="5-2-响应"><a href="#5-2-响应" class="headerlink" title="5.2.响应"></a>5.2.响应</h3><p>HTTP响应是由服务端发出的，作为客户端更应关心的是响应的结果。</p>
<p>HTTP响应3个组成部分与XMLHttpRequest方法或属性的对应关系。</p>
<p>由于服务器做出响应需要时间（比如网速慢等原因），所以我们需要监听服务器响应的状态，然后才能进行处理。</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_14.png" alt=" "></p>
<p><code>onreadystatechange</code>是Javascript的事件的一种，其意义在于监听<code>XMLHttpRequest</code>的状态。</p>
<ul>
<li>获取状态行（包括状态码&amp;状态信息）</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_15.png" alt=" "></p>
<ul>
<li>获取响应头</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_16.png" alt=" "></p>
<ul>
<li>响应主体</li>
</ul>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_17.png" alt=" "></p>
<p>我们需要检测并判断响应头的MIME类型后确定使用<code>request.responseText</code>或者<code>request.responseXML</code></p>
<h3 id="5-3-API详解"><a href="#5-3-API详解" class="headerlink" title="5.3.API详解"></a>5.3.API详解</h3><ul>
<li><p>xhr.open() 发起请求，可以是get、post方式</p>
</li>
<li><p>xhr.setRequestHeader() 设置请求头</p>
</li>
<li><p>xhr.send() 发送请求主体get方式使用xhr.send(null)</p>
</li>
<li><p>xhr.onreadystatechange = function () {} 监听响应状态</p>
</li>
<li><p>xhr.readyState = 0时，UNSENT open尚未调用</p>
</li>
<li><p>xhr.readyState = 1时，OPENED open已调用</p>
</li>
<li><p>xhr.readyState = 2时，HEADERS_RECEIVED 接收到头信息</p>
</li>
<li><p>xhr.readyState = 3时，LOADING 接收到响应主体</p>
</li>
<li><p>xhr.readyState = 4时，DONE 响应完成</p>
</li>
<li><p>xhr.status表示响应码，</p>
</li>
<li><p>xhr.statusText表示响应信息，</p>
</li>
<li><p>xhr.getAllResponseHeaders() 获取全部响应头信息</p>
</li>
<li><p>xhr.getResponseHeader(‘key’) 获取指定头信息</p>
</li>
<li><p>xhr.responseText、xhr.responseXML都表示响应主体</p>
</li>
</ul>
<p>注意：GET和POST请求方式的差异（面试题）</p>
<ul>
<li><p>GET没有请求主体，使用xhr.send(null)</p>
</li>
<li><p>GET可以通过在请求URL上添加请求参数</p>
</li>
<li><p>POST可以通过xhr.send<code>(&#39;name=itcast&amp;age=10&#39;)</code>[键值对的形式]</p>
</li>
<li><p>POST需要设置请求头：</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="5-4-GET效率更好（应用多）"><a href="#5-4-GET效率更好（应用多）" class="headerlink" title="5.4.GET效率更好（应用多）"></a>5.4.GET效率更好（应用多）</h3><h3 id="5-5-GET大小限制约4K，POST则没有限制。"><a href="#5-5-GET大小限制约4K，POST则没有限制。" class="headerlink" title="5.5.GET大小限制约4K，POST则没有限制。"></a>5.5.GET大小限制约4K，POST则没有限制。</h3><h2 id="6-XML数据VSJSON数据"><a href="#6-XML数据VSJSON数据" class="headerlink" title="6.XML数据VSJSON数据"></a>6.XML数据VSJSON数据</h2><p>问题：如何获取复杂数据呢？利用XML或者JSON，现在大多数情况下用的是JSON。我们可以先来看一下XML。</p>
<h3 id="6-1-XML数据"><a href="#6-1-XML数据" class="headerlink" title="6.1.XML数据"></a>6.1.XML数据</h3><p>XML是一种标记语言，很类似HTML，其宗旨是用来传输数据，具有自我描述性（固定的格式的数据）。</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_18.png" alt=" "></p>
<p>语法规则</p>
<ul>
<li><p>必须有一个根元素</p>
</li>
<li><p>不可有空格、不可以数字或.开头、大小写敏感</p>
</li>
<li><p>不可交叉嵌套</p>
</li>
<li><p>属性双引号（浏览器自动修正成双引号了）</p>
</li>
<li><p>特殊符号要使用实体</p>
</li>
<li><p>注释和HTML一样</p>
</li>
</ul>
<p>虽然可以描述和传输复杂数据，但是其解析过于复杂并且体积较大，所以实现开发已经很少使用了。</p>
<p>下面是一个关于XML的小案例</p>
<ul>
<li>index.html</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;XML&lt;/title&gt;</span><br><span class="line">		&lt;style&gt;</span><br><span class="line">			table &#123;</span><br><span class="line">				width: 300px;</span><br><span class="line">				border-collapse: collapse;</span><br><span class="line">			&#125;</span><br><span class="line">			td &#123;</span><br><span class="line">				height: 40px;</span><br><span class="line">				text-align: center;</span><br><span class="line">				border: 1px solid #CCC;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/style&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;table&gt;</span><br><span class="line">		&lt;/table&gt;</span><br><span class="line">		&lt;div class=&quot;btn&quot;&gt;&lt;input type=&quot;button&quot; value=&quot;获取数据&quot;&gt;&lt;/div&gt;</span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			var btn = document.querySelector(&apos;.btn&apos;);</span><br><span class="line">			btn.onclick = function() &#123;</span><br><span class="line">				var xhr = new XMLHttpRequest;</span><br><span class="line">				xhr.open(&apos;get&apos;, &apos;stars.php&apos;);</span><br><span class="line">				xhr.send(null);</span><br><span class="line">				xhr.onreadystatechange = function() &#123;</span><br><span class="line">					if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;</span><br><span class="line">						// 一个新的属性，用来接收XML格式的数据</span><br><span class="line">						var result = xhr.responseXML;</span><br><span class="line">						// console.log(result);</span><br><span class="line">						//解析XML文档的内容</span><br><span class="line">						var items = result.getElementsByTagName(&apos;root&apos;)[0];</span><br><span class="line">						//console.log(items);</span><br><span class="line">						var item = items.getElementsByTagName(&apos;item&apos;);</span><br><span class="line">						 //console.log(item);</span><br><span class="line">						 //&lt;item&gt;的子元素有多少个，就循环遍历几次(4)</span><br><span class="line">						var html = &apos;&apos;;</span><br><span class="line">						for(var i = 0; i &lt; item.length; i++) &#123;</span><br><span class="line">							var name = item[i].getElementsByTagName(&apos;name&apos;)[0];</span><br><span class="line">							var photo = item[i].getElementsByTagName(&apos;photo&apos;)[0];</span><br><span class="line">							var album = item[i].getElementsByTagName(&apos;album&apos;)[0];</span><br><span class="line">							var age = item[i].getElementsByTagName(&apos;age&apos;)[0];</span><br><span class="line">							var sex = item[i].getElementsByTagName(&apos;sex&apos;)[0];</span><br><span class="line">							var nameText = name.firstChild.nodeValue;</span><br><span class="line">							var photoText = photo.firstChild.nodeValue;</span><br><span class="line">							var albumText = album.firstChild.nodeValue;</span><br><span class="line">							var ageText = age.firstChild.nodeValue;</span><br><span class="line">							var sexText = sex.firstChild.nodeValue;</span><br><span class="line">							html += &apos;&lt;tr&gt;&apos;;</span><br><span class="line">							html += &apos;&lt;td&gt;&apos; + nameText + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">							html += &apos;&lt;td&gt;&apos; + albumText + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">							html += &apos;&lt;td&gt;&apos; + ageText + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">							html += &apos;&lt;td&gt;&apos; + sexText + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">							html += &apos;&lt;/tr&gt;&apos;;</span><br><span class="line"></span><br><span class="line">						&#125;</span><br><span class="line">						document.querySelector(&apos;table&apos;).innerHTML = html;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>stars.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="comment">// 指定文档类型</span></span><br><span class="line">	header(<span class="string">'Content-Type:text/xml; charset=utf-8'</span>);</span><br><span class="line"></span><br><span class="line">	$result = file_get_contents(<span class="string">'stars.xml'</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">echo</span> $result;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>stars.xml</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;root&gt;</span><br><span class="line">	&lt;item&gt;</span><br><span class="line">		&lt;name type=&quot;star&quot;&gt;王力宏&lt;/name&gt;</span><br><span class="line">		&lt;photo&gt;./images/wlh.jpg&lt;/photo&gt;</span><br><span class="line">		&lt;album&gt;&amp;lt;&amp;lt;改变自已&amp;gt;&amp;gt;&lt;/album&gt;</span><br><span class="line">		&lt;age&gt;39&lt;/age&gt;</span><br><span class="line">		&lt;sex&gt;男&lt;/sex&gt;</span><br><span class="line">	&lt;/item&gt;</span><br><span class="line">	&lt;item&gt;</span><br><span class="line">		&lt;name type=&quot;star&quot;&gt;周杰伦&lt;/name&gt;</span><br><span class="line">		&lt;photo&gt;./images/wlh.jpg&lt;/photo&gt;</span><br><span class="line">		&lt;album&gt;&amp;lt;&amp;lt;我很忙&amp;gt;&amp;gt;&lt;/album&gt;</span><br><span class="line">		&lt;age&gt;39&lt;/age&gt;</span><br><span class="line">		&lt;sex&gt;男&lt;/sex&gt;</span><br><span class="line">	&lt;/item&gt;</span><br><span class="line">	&lt;item&gt;</span><br><span class="line">		&lt;name type=&quot;star&quot;&gt;王力宏&lt;/name&gt;</span><br><span class="line">		&lt;photo&gt;./images/wlh.jpg&lt;/photo&gt;</span><br><span class="line">		&lt;album&gt;&amp;lt;&amp;lt;改变自已&amp;gt;&amp;gt;&lt;/album&gt;</span><br><span class="line">		&lt;age&gt;39&lt;/age&gt;</span><br><span class="line">		&lt;sex&gt;男&lt;/sex&gt;</span><br><span class="line">	&lt;/item&gt;</span><br><span class="line">	&lt;item&gt;</span><br><span class="line">		&lt;name type=&quot;star&quot;&gt;王力宏&lt;/name&gt;</span><br><span class="line">		&lt;photo&gt;./images/wlh.jpg&lt;/photo&gt;</span><br><span class="line">		&lt;album&gt;&amp;lt;&amp;lt;改变自已&amp;gt;&amp;gt;&lt;/album&gt;</span><br><span class="line">		&lt;age&gt;39&lt;/age&gt;</span><br><span class="line">		&lt;sex&gt;男&lt;/sex&gt;</span><br><span class="line">	&lt;/item&gt;</span><br><span class="line">&lt;/root&gt;</span><br></pre></td></tr></table></figure>
<p>运行结果：<img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/t_19.png" alt=" "></p>
<p>大家可以看出来真的是用xml来表示比较复杂的数据时，解析数据时真的是超级麻烦并且文档体积也很大。我们可以用JSON来表示复杂的数据，解析数据的时候也较为简单。</p>
<h3 id="6-2-JSON：即JavaScript-Object-Notation，另一种轻量级的文本数据交换格式，独立于语言。"><a href="#6-2-JSON：即JavaScript-Object-Notation，另一种轻量级的文本数据交换格式，独立于语言。" class="headerlink" title="6.2.JSON：即JavaScript Object Notation，另一种轻量级的文本数据交换格式，独立于语言。"></a>6.2.JSON：即JavaScript Object Notation，另一种轻量级的文本数据交换格式，独立于语言。</h3><p>语法规则：</p>
<ul>
<li><p>数据在名称/值对中</p>
</li>
<li><p>数据由逗号分隔(最后一个健/值对不能带逗号)</p>
</li>
<li><p>花括号保存对象方括号保存数组</p>
</li>
<li><p>使用双引号</p>
</li>
</ul>
<p>我们可以看下JSON解析数据的时候是否也和XML解析数据时一样复杂？</p>
<ul>
<li>index.html</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;JSON&lt;/title&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		table &#123;</span><br><span class="line">			width: 300px;</span><br><span class="line">			border-collapse: collapse;</span><br><span class="line">		&#125;</span><br><span class="line">		td &#123;</span><br><span class="line">			height: 40px;</span><br><span class="line">			text-align: center;</span><br><span class="line">			border: 1px solid #CCC;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;table&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line">	&lt;div class=&quot;btn&quot;&gt;&lt;input type=&quot;button&quot; value=&quot;获取数据&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var btn = document.querySelector(&apos;.btn&apos;);</span><br><span class="line">		btn.onclick = function () &#123;</span><br><span class="line">			var xhr = new XMLHttpRequest;</span><br><span class="line">			xhr.open(&apos;get&apos;, &apos;stars.php&apos;);</span><br><span class="line">			xhr.send(null);</span><br><span class="line">			xhr.onreadystatechange = function () &#123;</span><br><span class="line">				if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;</span><br><span class="line">					var result = xhr.responseText;</span><br><span class="line">					console.log(typeof(result));</span><br><span class="line">					//将JSON格式的字符串类型转化为JavaScript对象</span><br><span class="line">					var data = JSON.parse(result);</span><br><span class="line">					console.log(data);</span><br><span class="line">					var html = &apos;&apos;;</span><br><span class="line">					for(var i=0; i&lt;data.length; i++) &#123;</span><br><span class="line">						html += &apos;&lt;tr&gt;&apos;;</span><br><span class="line">						html += &apos;&lt;td&gt;&apos; + data[i].name + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">						html += &apos;&lt;td&gt;&apos; + data[i].ablum + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">						html += &apos;&lt;td&gt;&apos; + data[i].age + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">						html += &apos;&lt;td&gt;&apos; + data[i].sex + &apos;&lt;/td&gt;&apos;;</span><br><span class="line">						html += &apos;&lt;/tr&gt;&apos;;</span><br><span class="line">					&#125;</span><br><span class="line">					document.querySelector(&apos;table&apos;).innerHTML = html;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>stars.json</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;name&quot;: &quot;王力宏&quot;,</span><br><span class="line">		&quot;photo&quot;: &quot;./images/wlh.jpg&quot;,</span><br><span class="line">		&quot;ablum&quot;: &quot;&lt;&lt;改变自已&gt;&gt;&quot;,</span><br><span class="line">		&quot;age&quot;: 39,</span><br><span class="line">		&quot;sex&quot;: &quot;男&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;name&quot;: &quot;王力宏&quot;,</span><br><span class="line">		&quot;photo&quot;: &quot;./images/wlh.jpg&quot;,</span><br><span class="line">		&quot;ablum&quot;: &quot;&lt;&lt;改变自已&gt;&gt;&quot;,</span><br><span class="line">		&quot;age&quot;: 39,</span><br><span class="line">		&quot;sex&quot;: &quot;男&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;name&quot;: &quot;王力宏&quot;,</span><br><span class="line">		&quot;photo&quot;: &quot;./images/wlh.jpg&quot;,</span><br><span class="line">		&quot;ablum&quot;: &quot;&lt;&lt;改变自已&gt;&gt;&quot;,</span><br><span class="line">		&quot;age&quot;: 39,</span><br><span class="line">		&quot;sex&quot;: &quot;男&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;name&quot;: &quot;王力宏&quot;,</span><br><span class="line">		&quot;photo&quot;: &quot;./images/wlh.jpg&quot;,</span><br><span class="line">		&quot;ablum&quot;: &quot;&lt;&lt;改变自已&gt;&gt;&quot;,</span><br><span class="line">		&quot;age&quot;: 39,</span><br><span class="line">		&quot;sex&quot;: &quot;男&quot;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>stars.php</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">	// 指定文档类型</span><br><span class="line">	header(&apos;Content-Type:application/json; charset=utf-8&apos;);</span><br><span class="line">	$result = file_get_contents(&apos;stars.json&apos;);</span><br><span class="line">	echo $result;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>运行结果:<img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/t_19.png" alt=" "></p>
<p><code>parse()</code>方法的作用：将JSON格式的字符串类型转化为JavaScript对象</p>
<p>为什么要转化呢？</p>
<p>我们应该都知道不同的语言都有着自己的一套语法规则，比如说不同语言定义变量、定义数组、定义对象的方式肯定都有所不同，所以不同的语言之间的通信是通过字符串来表示的，比如说JSON格式的字符串，用””双引号包起来的不管是对象也好，数组也好，在不同的语言都是可以运行通过的，并不会报错，当各个不同的语言接收到了这个字符串之后，就利用自己所对应语言所封装的方法转化成自己可以识别的对象，以便后续的操作，比如说在JavaScript预言中，将JSON格式的字符串类型转化为JavaScript对象的方法是<code>parse()</code>。</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_20.png" alt=" "></p>
<p>现在我们可以得到一个毫无疑问的答案，JSON格式的数据要比XML格式的数据简单的多，我们以后还是尽量用JSON格式的数据，XML格式的数据已经淘汰了呢。</p>
<p>我们得需要了解一下XMLHttpRequest在标准浏览器和IE浏览器存在着兼容性问题，我们需要一个兼容性的写法</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/cliy-10/1240733/o_21.png" alt=" "></p>

    </div>
    
        <div class="reward">
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            
                <span class="reward-type">
                    <img class="wechat" src="../img/reward-wepay.jpg"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">赞赏是不耍流氓的鼓励</p>
</div>


    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">Snippet</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/06/15/封装的ajax()函数/" class="pre-post btn btn-default" title='ajax()函数的封装'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">ajax()函数的封装</span>
        </a>
    
    
        <a href="/2018/06/06/IE浏览器和标准浏览器的兼容性问题/" class="next-post btn btn-default" title='IE浏览器和标准浏览器的兼容性问题'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">IE浏览器和标准浏览器的兼容性问题</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
    
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'xOKV9J4UeQAtVkvnJC7Kq2Jn-gzGzoHsz',
            appKey: 'erIpQac4azoCmgfBB7Dl9maa',
            placeholder: '说点什么吧',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'Chinese'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">Table of Contents</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-XMLHttpRequest"><span class="toc-text">1.XMLHttpRequest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-同步"><span class="toc-text">2.同步</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-XMLHttpRequest传递数据"><span class="toc-text">3.XMLHttpRequest传递数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-XMLHttpRequest实现局部更新功能-表单事件提交"><span class="toc-text">4.XMLHttpRequest实现局部更新功能(表单事件提交)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-简单的总结"><span class="toc-text">5.简单的总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-请求"><span class="toc-text">5.1.请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-响应"><span class="toc-text">5.2.响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-API详解"><span class="toc-text">5.3.API详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-GET效率更好（应用多）"><span class="toc-text">5.4.GET效率更好（应用多）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-GET大小限制约4K，POST则没有限制。"><span class="toc-text">5.5.GET大小限制约4K，POST则没有限制。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-XML数据VSJSON数据"><span class="toc-text">6.XML数据VSJSON数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-XML数据"><span class="toc-text">6.1.XML数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-JSON：即JavaScript-Object-Notation，另一种轻量级的文本数据交换格式，独立于语言。"><span class="toc-text">6.2.JSON：即JavaScript Object Notation，另一种轻量级的文本数据交换格式，独立于语言。</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2017
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>