{"title":"2-3-Git基础","date":"2018-08-04T07:35:02.000Z","link":"2018/08/04/2-3-Git基础","tags":["Git"],"categories":["前端"],"updated":"2018-10-12T14:48:46.771Z","content":"<h2 id=\"3-查看提交历史\">3.查看提交历史<a href=\"2018/08/04/2-3-Git基础#3-查看提交历史\"></a></h2><p><code>git log</code>命令用来查看某个项目的提交历史，我们可以查看提交了若干更新或者是克隆的某个项目提交历史记录。</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git pull origin master</span><br><span class=\"line\">$ git log</span><br><span class=\"line\">commit 011909b7b4e8942a5f18a7bb52a25dd63623c3aa</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Sun Jul 29 18:03:16 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    blog-third</span><br><span class=\"line\"></span><br><span class=\"line\">commit 2d428927038fc78846f7c4b21906bcede964226c</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Sun Jul 29 17:51:44 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    README.md</span><br><span class=\"line\"></span><br><span class=\"line\">commit c96f1e2772d2c0a45734fa5f4ef68d1070812186</span><br><span class=\"line\">Author: ying &lt;1511317497@qq.com&gt;</span><br><span class=\"line\">Date:   Tue Jul 17 11:20:25 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    blog-second</span><br><span class=\"line\"></span><br><span class=\"line\">commit d585eaa4e1eac4a181c55acf5ce045d76c901ceb</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Thu Jul 12 16:17:32 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    Create README.md</span><br></pre></td></tr></table></div></figure>\n<p><code>git log</code>会按提交时间列出所有的更新，最近的更新排在最上面，这个命令会列出每个提交的<code>SHA-1</code>校验和、作者的名字和电子邮件地址、提交时间以及提交说明。</p>\n<p>git log命令有许多选项可以帮助你搜寻你所要找的提交。</p>\n<ul>\n<li><code>-p</code>按补丁格式显示每次提交的内容差异，可以加上数字(-2)它将限制输出长度，也就意味着仅显示最近两次的提交。</li>\n</ul>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log -p -2</span><br><span class=\"line\">commit 011909b7b4e8942a5f18a7bb52a25dd63623c3aa</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Sun Jul 29 18:03:16 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    blog-third</span><br><span class=\"line\"></span><br><span class=\"line\">diff --git &quot;a/README.md&quot; &quot;b/README.md&quot;</span><br><span class=\"line\">index aae07c6..4bfc990 100644</span><br><span class=\"line\">--- &quot;a/README.md&quot;</span><br><span class=\"line\">+++ &quot;b/README.md&quot;</span><br><span class=\"line\">@@ -165,7 +165,6 @@ A.prototype.name=&quot;张三&quot;;</span><br><span class=\"line\"> function B()&#123;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> B.prototype=new A();</span><br><span class=\"line\">-</span><br><span class=\"line\"> var b=new B();</span><br><span class=\"line\"> console.log(b.name);  //张三</span><br><span class=\"line\"> console.log(b.age);  //undefined</span><br></pre></td></tr></table></div></figure>\n<p> -p选项除了显示基本信息之外，还附带了每次commit的变化。</p>\n<ul>\n<li><code>--stat</code>显示每次更新的文件修改统计信息</li>\n</ul>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --stat</span><br><span class=\"line\">commit 011909b7b4e8942a5f18a7bb52a25dd63623c3aa</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Sun Jul 29 18:03:16 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    blog-third</span><br><span class=\"line\"></span><br><span class=\"line\">  README.md | 1 -</span><br><span class=\"line\"> 1 file changed, 1 deletion(-)</span><br><span class=\"line\"></span><br><span class=\"line\">commit 575b0cc7ab8a6ce8b107ac0e4b5bc7636b7897c1</span><br><span class=\"line\">Author: 255255255255 &lt;33173766+255255255255@users.noreply.github.com&gt;</span><br><span class=\"line\">Date:   Sun Jul 29 18:01:49 2018 +0800</span><br><span class=\"line\"></span><br><span class=\"line\">    blog-third</span><br><span class=\"line\"></span><br><span class=\"line\"> &quot;README.md&quot; | 2 --</span><br><span class=\"line\"> 1 file changed, 2 deletions(-)</span><br></pre></td></tr></table></div></figure>\n<p>–stat选项在每次提交的下面列出所有被修改过的文件、有多少文件被修改了以及被修改过的文件的哪些行被移除或是添加了。</p>\n<ul>\n<li><p><code>--shortstat</code>：只显示<code>--stat</code>中最后的行数修改添加移除统计。</p>\n</li>\n<li><p><code>--name-only</code>：仅在提交信息后显示已修改的文件清单。</p>\n</li>\n<li><p><code>--name-status</code>：显示新增、修改、删除的文件清单。</p>\n</li>\n<li><p><code>--abbrev-commit</code>：仅显示SHA-1的前几个字符，而非所有的40个字符。</p>\n</li>\n<li><p><code>--relative-date</code>：使用较短的相对时间显示</p>\n</li>\n<li><p><code>--graph</code>：显示ASCCII图形表示的分支合并历史。</p>\n</li>\n<li><p><code>--pretty</code>：指定使用不同于默认格式的方式展示提交历史。可用的选项包括oneline，short，full，fuller 和format。</p>\n</li>\n</ul>\n<p>oneline表示将每个提交放在一行显示。</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --pretty=oneline</span><br><span class=\"line\">011909b7b4e8942a5f18a7bb52a25dd63623c3aa blog-third</span><br><span class=\"line\">2d428927038fc78846f7c4b21906bcede964226c README.md</span><br><span class=\"line\">5f007ee5cf5fa337420265c713b5717c72763500 first-javascript</span><br><span class=\"line\">c96f1e2772d2c0a45734fa5f4ef68d1070812186 blog-second</span><br><span class=\"line\">d585eaa4e1eac4a181c55acf5ce045d76c901ceb Create README.md</span><br><span class=\"line\">dceb7854ab9a316e3800046852f399dde075aaed Delete README.md</span><br><span class=\"line\">abd37e003368157d02f6f9e2e948ff72322c9890 blog-first</span><br></pre></td></tr></table></div></figure>\n<p>format可以定制要显示的记录格式。</p>\n<p>%H 提交对象（commit）的完整哈希字串</p>\n<p>%h 提交对象的简短哈希字串</p>\n<p>%T 树对象（tree）的完整哈希字串</p>\n<p>%t 树对象的简短哈希字串</p>\n<p>%P 父对象（parent）的完整哈希字串</p>\n<p>%p 父对象的简短哈希字串</p>\n<p>%an 作者（author）的名字</p>\n<p>%ae 作者的电子邮件地址</p>\n<p>%ad 作者修订日期（可以用–date=选项定制格式）</p>\n<p>%ar 作者修订日期，按多久以前的方式显示</p>\n<p>%cn 提交者（committer）的名字</p>\n<p>%ce 提交者的电子邮件地址</p>\n<p>%cd 提交日期</p>\n<p>%cr 提交日期，按多久以前的方式显示</p>\n<p>%s 提交说明</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --pretty=format:&quot;%h - %an,%ar : %s&quot;</span><br><span class=\"line\">011909b - 255255255255,3 hours ago : blog-third</span><br><span class=\"line\">2d42892 - 255255255255,3 hours ago : README.md</span><br><span class=\"line\">5f007ee - ying,7 days ago : first-javascript</span><br><span class=\"line\">c96f1e2 - ying,12 days ago : blog-second</span><br><span class=\"line\">d585eaa - 255255255255,2 weeks ago : Create README.md</span><br><span class=\"line\">dceb785 - 255255255255,2 weeks ago : Delete README.md</span><br><span class=\"line\">abd37e0 - ying,2 weeks ago : blog-first</span><br></pre></td></tr></table></div></figure>\n<p>注意：作者和提交者的差别</p>\n<p>作者指的是实际作出修改的人，提交者指的是最后将此工作成果提交到仓库的人。假设当你为某个项目发布补丁，然后某个核心成员将你的补丁并入项目时，你就是作者，而那个核心成员就是提交者。</p>\n<p>我们可以灵活的组合使用git log命令的这些选项。</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$  git log --pretty=format:&quot;%h %s&quot; --graph</span><br><span class=\"line\">* 011909b blog-third</span><br><span class=\"line\">* 575b0cc blog-third</span><br><span class=\"line\">* 9dcb0d7 blog-third</span><br><span class=\"line\">* 050b346 blog-third</span><br><span class=\"line\">* 2d42892 README.md</span><br><span class=\"line\">* 9e2b474 README.md</span><br><span class=\"line\">* 5f007ee first-javascript</span><br><span class=\"line\">* c96f1e2 blog-second</span><br><span class=\"line\">* d585eaa Create README.md</span><br><span class=\"line\">* dceb785 Delete README.md</span><br><span class=\"line\">* abd37e0 blog-first</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"3-1-限制输出长度\">3.1.限制输出长度<a href=\"2018/08/04/2-3-Git基础#3-1-限制输出长度\"></a></h3><p>我们不仅可以定制输出格式的选项，还可以限制输出长度，也就是只输出部分提交信息。</p>\n<ul>\n<li>-(n)仅显示最近的n条提交</li>\n</ul>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log -p -2</span><br></pre></td></tr></table></div></figure>\n<p>n可以是任何整数，表示仅显示最近的若干条提交</p>\n<ul>\n<li>–since, –after仅显示指定时间之后的提交。</li>\n</ul>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --since=2.weeks</span><br><span class=\"line\">$ git log --since=&quot;2018-07-29&quot;</span><br><span class=\"line\">$ git log --since= &quot;2 years 1 day 3 minutes ago&quot;</span><br></pre></td></tr></table></div></figure>\n<ul>\n<li><p>–until, –before仅显示指定时间之前的提交。</p>\n</li>\n<li><p>–author 仅显示指定作者相关的提交。</p>\n</li>\n<li><p>–committer 仅显示指定提交者相关的提交。</p>\n</li>\n<li><p>–grep仅显示含指定关键字的提交</p>\n</li>\n<li><p>-S仅显示添加或移除了某个关键字的提交。例如，想找出添加或移除了某一个特定函数的引用的提交。</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log -Sfunction_name</span><br></pre></td></tr></table></div></figure>\n<p>举例：要查看Git仓库中，2018年7月期间，作者ying提交的文件。</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --pretty=format:&quot;%h - %s&quot; --author=ying --since=&quot;2018-07-01&quot; --before=&quot;2018-08-01&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">7022a10 - second-Git</span><br><span class=\"line\">9358d27 - first-Git</span><br></pre></td></tr></table></div></figure>\n","prev":{"title":"2-4-Git基础","link":"2018/08/05/2-4-Git基础"},"next":{"title":"2-2-Git基础","link":"2018/08/03/2-2-Git基础"},"plink":"http://yoursite.com/2018/08/04/2-3-Git基础/","toc":[{"title":"3.查看提交历史","id":"3-查看提交历史","index":"1","children":[{"title":"3.1.限制输出长度","id":"3-1-限制输出长度","index":"1.1"}]}]}